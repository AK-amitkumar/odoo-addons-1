<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<!-- Cost Price History Tree View -->
		<record id="eq_product_template_standard_price_history_tree_view"
			model="ir.ui.view">
			<field name="name">eq.product.template.standard_price_history.tree.view
			</field>
			<field name="model">product.template.standard_price_history</field>
			<field name="arch" type="xml">
				<tree string="Cost Price History">
					<field name="eq_product_id" />
					<field name="eq_old_price" />
					<field name="eq_new_price" />
					<field name="create_date" />
					<field name="create_uid" />
				</tree>
			</field>
		</record>

		<!-- Cost Price History Form View -->
		<record id="eq_product_template_standard_price_history_form_view"
			model="ir.ui.view">
			<field name="name">eq.product.template.standard_price_history.form.view
			</field>
			<field name="model">product.template.standard_price_history</field>
			<field name="arch" type="xml">
				<form string="Cost Price History">
					<sheet>
						<group col="4">
							<h1 colspan="4">
								<field name="eq_product_id" />
							</h1>
							<field name="eq_old_price" />
							<field name="create_date" />
							<field name="eq_new_price" />
							<field name="create_uid" />
						</group>
					</sheet>
				</form>
			</field>
		</record>
		
		<!-- Cost Price History Search View -->
		<record id="eq_product_template_standard_price_history_search_view" model="ir.ui.view">
			<field name="name">eq.product.template.standard_price_history.search.view
			</field>
			<field name="model">product.template.standard_price_history</field>
			<field name="arch" type="xml">
				<search string="Search History">
	                    <field name="eq_product_id"/>
						<field name="eq_old_price"/>
						<field name="eq_new_price"/>
						<field name="create_uid"/>
						<field name="create_date"/>
						
						<group expand="0" string="Group By">
						    <filter string="Product" context="{'group_by' : 'eq_product_id'}"/>
						</group>
			</search>
			</field>
		</record>
		
		<!-- Cost Price History Action -->
        <record id="eq_template_standard_price_history_action" model="ir.actions.act_window">
            <field name="name">Cost Price History</field>
            <field name="res_model">product.template.standard_price_history</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_eq_product_id': active_id, 'default_eq_product_id': active_id}</field>
        </record>

		<!-- Product Template - form view -->
		<record id="eq_product_template_form_view_sale_order_button_inherit"
			model="ir.ui.view">
			<field name="name">eq.product.template.only.form.view.inherit</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="sale.product_template_form_view_sale_order_button" />
			<field name="arch" type="xml">
				<field name="sales_count" position="replace">
					<field name="eq_sale_count" widget="statinfo" />
				</field>
				<!-- Error : cannot be located in parent view -->
				<field name="barcode" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
				<field name="default_code" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
			</field>
		</record>


		<!-- Product Template - form view --><!-- Page string - Procurements not available on Odoo9 -->
<!--		<record id="eq_product_template_common_form_inherit" model="ir.ui.view">
			<field name="name">eq.product.template.common.form</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="product.product_template_form_view" />
			<field name="arch" type="xml">

 				<xpath expr="//page[@string='Procurements']" position="attributes">
					<attribute name="groups">equitania.purchase_in_products
					</attribute>
				</xpath> 
			</field>
		</record>-->

		<!-- Product Product - form view -->
		<record id="eq_product_form_view_sale_order_button_inherit"
			model="ir.ui.view">
			<field name="name">eq.product.product.form.view.inherit</field>
			<field name="model">product.product</field>
			<field name="inherit_id" ref="sale.product_form_view_sale_order_button" />
			<field name="arch" type="xml">
				<field name="sales_count" position="replace">
					<field name="eq_sale_count" widget="statinfo" />
				</field>
			</field>
		</record>


		<record id="eq_product_template_only_form_view" model="ir.ui.view">
			<field name="name">eq.product.template.only.form.view</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="product.product_template_only_form_view" />
			<field name="arch" type="xml">
				<field name="standard_price" position="attributes">
					<attribute name="class">oe_inline</attribute>
				</field>
				<field name="standard_price" position="after">
					<button string="Show Price History" type="action" name="%(eq_template_standard_price_history_action)d" class="oe_inline oe_link"/>
				</field>

				<!-- (future use?) min. order quantity for product.template -->
				<!-- <group name="sale_condition" position="inside"> <label for="eq_sale_min_qty"/> 
					<div> <field name="eq_sale_min_qty"/> </div> </group> -->
					
					<!-- Error : cannot be located in parent view -->
<!-- 				<group name="store" position="replace">
				</group> -->
			</field>
		</record>

		<!-- min. order quantity for product.product -->
		<record id="eq_product_product_normal_form_view" model="ir.ui.view">
			<field name="name">eq.product.product.normal.form.view</field>
			<field name="model">product.product</field>
			<field name="inherit_id" ref="product.product_normal_form_view" />
			<field name="arch" type="xml">
				<group name="sale_condition" position="inside">
					<label for="eq_sale_min_qty" class="eq_db_variant" />
					<div>
						<field name="eq_sale_min_qty" />
					</div>
				</group>
				<field name="lst_price" position="after">
					<field name="eq_rrp" groups="equitania.group_product_rrp"
						class="eq_db_variant" />
				</field>
				<field name="barcode" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
				<field name="default_code" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
				<field name="active" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
				<field name="default_code" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
				<field name="eq_sale_min_qty" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
			<!-- 	Error : cannot be located in parent view -->
<!-- 				<label for="qty_available" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</label>
				<field name="virtual_available" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</field>
				<label for="incoming_qty" position="attributes">
					<attribute name="class">eq_db_variant</attribute>
				</label>


 				<group name="store" position="replace"> 
				</group> -->

			</field>
		</record>
		
	   <!-- Pricelist Item Form --> <!-- Error : <field name="sequence">' cannot be located in parent view -->
       <!--  <record id="eq_product_pricelist_item_form_view" model="ir.ui.view">
            <field name="name">eq_product_pricelist_item_form_view</field>
            <field name="model">product.pricelist.item</field>
            <field name="inherit_id" ref="product.product_pricelist_item_form_view" />
            <field name="arch" type="xml">
            	<field name="sequence" position="after">
            		<field name="price_version_id"/>
            	</field>            	
            	
            	<xpath expr="//label[@for='name']" position="before">
            		<button name="set_defaults" type="object" string='Set defaults' class="oe_edit_only"/>
            		<br/>
            	</xpath>
            	            	   
            </field>
        </record>     -->
        
        <!-- Pricelist Items Tree View -->
        <record id="eq_framework_agreement_tree_view" model="ir.ui.view">
            <field name="name">product.pricelist.item.tree</field>
            <field name="model">product.pricelist.item</field>
            <field name="arch" type="xml">
                <tree string="Products Listprices Items">
                    <field name="sequence"/>
                    <field colspan="4" name="name"/>
                    <field name="product_id"/>
                    <field name="product_tmpl_id"/>
                    <field name="categ_id"/>
                    <field name="min_quantity"/>
                    <field name="price_surcharge" string="Price"/>
                    <field name="base"/>
                    <!-- <field name="price_version_id"/> --> <!-- Error : Field `price_version_id` does not exist -->
                    
                </tree>                               
            </field>
        </record>
        
         <!-- Pricelist Items Action product.template -->
        <record id="action_eq_open_pricelist_item_tree_product_template" model="ir.actions.act_window">
            <field name="context">{'default_product_tmpl_id': active_id, 'search_default_product_tmpl_id': active_id}</field>
            <field name="name">Pricelist Items</field>
            <field name="res_model">product.pricelist.item</field>
            <field name="domain">[('product_tmpl_id', '=', active_id)]</field>
            <field name="view_id" ref="eq_framework_agreement_tree_view"/>
       	</record>
        
	    <!-- Pricelist Items Action product.product -->
        <record id="action_eq_open_pricelist_item_tree_product_product" model="ir.actions.act_window">
            <field name="context">{'default_product_id': active_id, 'search_default_product_id': active_id}</field><!-- force empty -->
            <field name="name">Pricelist Items</field>
            <field name="res_model">product.pricelist.item</field>
            <field name="domain">[('product_id', '=', active_id)]</field>
            <field name="view_id" ref="eq_framework_agreement_tree_view"/>
       	</record> 
       	
       	<!-- Product Template - form view -->
        <record id="eq_product_product_template_only_form_view" model="ir.ui.view">
            <field name="name">eq.product.product_template_only_form_view.inherit</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_only_form_view" />
            <field name="arch" type="xml">
                            
                <!-- add only our 2 main fields and remove default_code..will be added below -->
                <xpath expr="//group//field[@name='default_code']" position="replace">
                    <field name="eq_drawing_number"/>
                    <field name="eq_index"/>
                </xpath>
                 
                <!-- here it is, add that feld default_code together with update link -->
                <xpath expr="//div[@class='oe_title']" position="replace">
	                <div class="oe_title" style="width: 390px;">
						<h3>						
							 <div>
		                        <field name="default_code"/>
		                        <button name="eq_product_number_update" string="Generate number" type="object" class="oe_edit_only oe_link oe_inline"/>
		                        <newline/>
                    		</div>
                    		
                    		<!-- removed standard css class to archive bigger width for name -->
							<field name="name"  modifiers="{'required': true}"/>							 							 
						</h3>
					</div>
                </xpath>
                
                <!-- remove state dropdownlist --> <!-- Error: cannot be located in parent view -->
                <!-- <xpath expr="//field[@name='state']" position="replace">
                </xpath> -->
                
                <!-- Error: cannot be located in parent view -->
                <!-- <label for="purchase_ok" position="after">
                	<div>


						<label for="state" string="State"/>
						<field name="state"/>
					</div>
                </label> -->
                              
                <!-- remove category dropdownlist -->
                <xpath expr="//field[@name='categ_id']" position="replace">
                </xpath>
                
                <!-- remove label for category dropdownlist --> <!-- Error: cannot be located in parent view -->
             <!--    <xpath expr="//label[@for='categ_id']" position="replace">
                </xpath> -->
                
                <!-- append category dropdownlist on first tab -->
                <xpath expr="//field[@name='list_price']" position="after">
                	<field name="eq_internal_number"/>
                	<field name="eq_internal_text"/>
                	<label for="categ_id" string="Internal Category"/>
                	<div><field name="categ_id" colspan="3" nolabel="1"/></div>
                </xpath>
                
                <!-- add button for the pricelist items --> <!-- Error: cannot be located in parent view -->
               <!--  <xpath expr="//div[@name='buttons']" position="inside">
                   	<button class="oe_stat_button"
                            name="%(action_eq_open_pricelist_item_tree_product_template)d"
                            icon="fa-strikethrough"
                            type="action" attrs="{'invisible':[('sale_ok', '!=', True)]}">
                  		<div><strong><field name="eq_pricelist_items_count"/></strong><br/>Pricelist Pos</div>
                   	</button>
                   	<button class="oe_stat_button"
                            name="action_view_invoice_out"
                            icon="fa-strikethrough"
                            type="object" attrs="{'invisible':[('sale_ok', '!=', True)]}">
                  		<div><strong><field name="eq_invoice_count_out"/></strong><br/>Invoice Out</div>
                   	</button>
                   	<button class="oe_stat_button"
                            name="action_view_invoice_in"
                            icon="fa-strikethrough"
                            type="object" attrs="{'invisible':[('purchase_ok', '!=', True)]}">
                  		<div><strong><field name="eq_invoice_count_in"/></strong><br/>Invoice In</div>
                   	</button>
                </xpath> -->
            </field>
        </record>  
        
        <!-- product_template - search view -->
        <record id="eq_product_template_search_view" model="ir.ui.view">
            <field name="name">eq.product.template.product.search</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_search_view" />
            <field name="arch" type="xml">
                <field name="name" position="replace">
                   <field name="name" string="Product" filter_domain="['|',('default_code','ilike',self),('name','ilike',self)]"/>
                   <field name="name" string="Name"/>
                </field>  
               <!--  Error : cannot be located in parent view -->
            	<!-- <field name="product_variant_ids" position="after">
            		<field name="default_code"/>
            		<field name="eq_drawing_number"/>
            		<field name="eq_internal_number"/>
            		<field name="eq_index"/>
            	</field> -->
            </field>
        </record>
        
        <!-- product_template - tree view -->
        <record id="eq_product_template_tree_view" model="ir.ui.view">
            <field name="name">eq.product.template.product.tree</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_tree_view" />
            <field name="arch" type="xml">
            	<field name="name" position="before">
            	<!-- 
            		<field name="default_code"/>
            	 -->
            		<field name="eq_default_code_copy" string="Productno."/>
            	</field>
            	<field name="categ_id" position="before">
            		<field name="list_price"/>
            		<field name="eq_internal_number"/>
            		<field name="eq_index"/>
            	</field>
            </field>
        </record>
        
        <!-- product_template - kanban view --> <!-- Error :cannot be located in parent view -->
        <!--<record id="eq_product_template_kanban_view" model="ir.ui.view">
            <field name="name">eq.product.template.kanban.view</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_kanban_view" />
            <field name="arch" type="xml">
            	<xpath expr="//kanban/templates/t/div/div[@class='oe_kanban_details']/a[@type='action']" position="replace">
            		<field name="default_code"/>
            	</xpath>
            </field>
        </record> -->
        
                
        <!-- Product Product - form view -->
        <record id="eq_product_product_form_view" model="ir.ui.view">
            <field name="name">eq.product.product.form.view.inherit</field>
            <field name="model">product.product</field>            
            <field name="inherit_id" ref="product.product_normal_form_view" />
            <field name="arch" type="xml">            	
            	<!-- add only our 2 main fields and remove default_code..will be added below -->
            	<xpath expr="//group//field[@name='default_code']" position="replace">
                    <field name="eq_drawing_number" class="eq_db_variant"/>
                    <field name="eq_index" class="eq_db_variant"/>
                </xpath>
                
                 <!-- here it is, add that feld default_code together with update link -->
                 <xpath expr="//div[@class='oe_title']" position="replace">
	                <div class="oe_title" style="width: 390px;">
						<h3>						
							 <div>
		                        <field name="default_code" class="oe_form_required"/>
		                        <button name="eq_product_number_update" string="Generate number" type="object" class="oe_edit_only oe_link oe_inline"/>
		                        <newline/>
                    		</div>
                    		<!-- removed standard css class to archive bigger width for name -->
							<field name="name"  modifiers="{'required': true}"/>							 							 
						</h3>
					</div>
                </xpath>
                                
                <!-- remove state dropdownlist --> <!-- Error:cannot be located in parent view -->
               <!--  <xpath expr="//field[@name='state']" position="replace">
                </xpath> -->

				<!-- Error: cannot be located in parent view -->
               <!--  <label for="purchase_ok" position="after"> 
                	<div>

						 

						<label for="state" string="State"/>
						<field name="state"/>						
						
						<div><field name="categ_id" colspan="3" nolabel="1"/></div>
						
					</div>
                </label> -->
                                
                <!-- remove category dropdownlist --> <!-- Error:  cannot be located in parent view -->
<!--                 <xpath expr="//field[@name='categ_id']" position="replace">
                </xpath> -->
                
                <!-- remove label for category dropdownlist --><!-- Error:  cannot be located in parent view -->
<!--                 <xpath expr="//label[@for='categ_id']" position="replace">
                </xpath> -->
                
                <!-- append category dropdownlist on first tab -->
                <xpath expr="//field[@name='lst_price']" position="after">
                	<field name="eq_internal_number" class="eq_db_variant"/>
                	<field name="eq_internal_text" class="eq_db_variant"/>
                	<label for="categ_id" string="Internal Category"/>
                	<div><field name="categ_id" colspan="3" nolabel="1"/></div>
                </xpath>
                
                <!-- add button for the pricelist items --> <!-- Error:cannot be located in parent view -->
               <!--  <xpath expr="//div[@name='buttons']" position="inside">
                   	<button class="oe_stat_button"
                            name="%(action_eq_open_pricelist_item_tree_product_product)d"
                            icon="fa-strikethrough"
                            type="action" attrs="{'invisible':[('sale_ok', '!=', True)]}">
                  		<div><strong><field name="eq_pricelist_items_count"/></strong><br/>Pricelist Pos</div>
                   	</button>
                   	<button class="oe_stat_button"
                            name="action_view_invoice_out"
                            icon="fa-strikethrough"
                            type="object" attrs="{'invisible':[('sale_ok', '!=', True)]}">
                  		<div><strong><field name="eq_invoice_count_out"/></strong><br/>Invoice Out</div>
                   	</button>
                   	<button class="oe_stat_button"
                            name="action_view_invoice_in"
                            icon="fa-strikethrough"
                            type="object" attrs="{'invisible':[('purchase_ok', '!=', True)]}">
                  		<div><strong><field name="eq_invoice_count_in"/></strong><br/>Invoice In</div>
                   	</button>
                </xpath> -->
            </field>
        </record>
        
        <!-- product.product - tree view -->
        <record id="eq_product_product_tree_view" model="ir.ui.view">
            <field name="name">eq.product.product.tree</field>
            <field name="model">product.product</field>            
            <field name="inherit_id" ref="product.product_product_tree_view" />
            <field name="arch" type="xml">
            	<field name="lst_price" position="after">
            		<field name="eq_internal_number"/>
            		<field name="eq_index"/>
            	</field> 
            </field>
        </record>

        <!-- Extension of 'More' dropdownlist of product.product -->		 		 
		<act_window name="Assign product number"
    		res_model="eq_multy_assign_product_no"
    		src_model="product.product"
    		key2="client_action_multi" 
    		view_mode="form"
    		target="new" 
    		view_type="form"
    		view_id="eq_multy_assign_product_no_form_view"
    		id="act_multy_assign_product_no" />
        
        <!-- product.product - kanban view -->        
        <record id="eq_product_kanban_view" model="ir.ui.view">
            <field name="name">eq.product.kanban.view</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_kanban_view" />
            <field name="arch" type="xml">
            	<xpath expr="//ul" position="before">
            		<field name="default_code"/>
            	</xpath>
            </field>
        </record>
        
        <!-- product.product - search view -->
        <record id="eq_product_search_form_view" model="ir.ui.view">
            <field name="name">eq.product.product.search</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_search_form_view" />
            <field name="arch" type="xml">
                <field name="name" position="replace">
                   <field name="name" string="Product" filter_domain="['|','|',('default_code','ilike',self),('default_code','ilike',self),('name','ilike',self)]"/>
                   <field name="name" string="Name"/>
                </field> 
            </field>
        </record>
        
    
    <!-- Error: ParseError -->
    <!-- <data noupdate="1">
        <record id="eq_seq_creditor_ref" model="ir.sequence.type">
            <field name="name">Creditor Number</field>
            <field name="code">eq_creditor_ref</field>
        </record>
        <record id="seq_kreditpr_ref" model="ir.sequence">
            <field name="name">Creditor Number</field>
            <field name="code">eq_creditor_ref</field>
            <field name="number_next">70001</field>
            <field name="padding">5</field>
            <field eval="1" name="number_increment"/>
        </record>


        <record id="eq_seq_customer_ref" model="ir.sequence.type">
            <field name="name">Customer Number</field>
            <field name="code">eq_customer_ref</field>
        </record>
        <record id="seq_customer_ref" model="ir.sequence">
            <field name="name">Customer Number</field>
            <field name="code">eq_customer_ref</field>
            <field name="number_next">10001</field>
            <field name="padding">5</field>
            <field eval="1" name="number_increment"/>
        </record>  
 		</data> -->
	</data>
</openerp>